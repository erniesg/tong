import{G as b,u as e,d as s,y as k}from"./chunks/hooks.module.CvzeXvhM.js";const g=[{code:"en",name:"English"},{code:"zh",name:"Chinese (Simplified)"},{code:"zh-TW",name:"Chinese (Traditional)"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"}];function y(){const[a,l]=s(null),[u,m]=s(!0),[r,c]=s(!1),[h,o]=s(null);k(()=>{p()},[]);const p=async()=>{try{const n=await chrome.runtime.sendMessage({type:"GET_PREFERENCES"});n.success&&l(n.data)}catch(n){console.error("Error loading preferences:",n)}finally{m(!1)}},v=async()=>{if(a){c(!0),o(null);try{(await chrome.runtime.sendMessage({type:"SET_PREFERENCES",payload:a})).success?(o("Settings saved successfully!"),setTimeout(()=>o(null),3e3)):o("Error saving settings")}catch(n){console.error("Error saving preferences:",n),o("Error saving settings")}finally{c(!1)}}},d=(n,t)=>{a&&l({...a,languages:{...a.languages,[n]:t}})},i=(n,t)=>{a&&l({...a,subtitles:{...a.subtitles,[n]:t}})};return u?e("div",{className:"options",children:e("div",{className:"loading",children:"Loading settings..."})}):e("div",{className:"options",children:[e("header",{className:"header",children:[e("h1",{children:"Pinpoint Settings"}),e("p",{children:"Configure your language learning preferences"})]}),e("main",{className:"content",children:[e("section",{className:"section",children:[e("h2",{children:"Language Settings"}),e("div",{className:"form-group",children:[e("label",{children:"Learning Language"}),e("select",{value:a==null?void 0:a.languages.primaryTarget,onChange:n=>d("primaryTarget",n.target.value),children:g.filter(n=>["zh","zh-TW","ja","ko"].includes(n.code)).map(n=>e("option",{value:n.code,children:n.name},n.code))})]}),e("div",{className:"form-group",children:[e("label",{children:"Translation Language"}),e("select",{value:a==null?void 0:a.languages.translationLanguage,onChange:n=>d("translationLanguage",n.target.value),children:g.filter(n=>{const t=(a==null?void 0:a.languages.primaryTarget)||"";return!(n.code===t||n.code==="zh"&&t==="zh-TW"||n.code==="zh-TW"&&t==="zh")}).map(n=>e("option",{value:n.code,children:n.name},n.code))})]})]}),e("section",{className:"section",children:[e("h2",{children:"Subtitle Display"}),e("div",{className:"form-group checkbox-group",children:e("label",{children:[e("input",{type:"checkbox",checked:a==null?void 0:a.subtitles.showOriginal,onChange:n=>i("showOriginal",n.target.checked)}),"Show original subtitles"]})}),e("div",{className:"form-group checkbox-group",children:e("label",{children:[e("input",{type:"checkbox",checked:a==null?void 0:a.subtitles.showRomanization,onChange:n=>i("showRomanization",n.target.checked)}),"Show romanization (Pinyin/Romaji/etc.)"]})}),e("div",{className:"form-group checkbox-group",children:e("label",{children:[e("input",{type:"checkbox",checked:a==null?void 0:a.subtitles.showTranslation,onChange:n=>i("showTranslation",n.target.checked)}),"Show translation"]})}),e("div",{className:"form-group checkbox-group",children:e("label",{children:[e("input",{type:"checkbox",checked:a==null?void 0:a.subtitles.karaokeEnabled,onChange:n=>i("karaokeEnabled",n.target.checked)}),"Enable karaoke-style highlighting"]})}),e("div",{className:"form-group",children:[e("label",{children:"Font Size"}),e("input",{type:"range",min:"16",max:"48",value:a==null?void 0:a.subtitles.fontSize,onChange:n=>i("fontSize",parseInt(n.target.value))}),e("span",{children:[a==null?void 0:a.subtitles.fontSize,"px"]})]}),e("div",{className:"form-group",children:[e("label",{children:"Position"}),e("select",{value:a==null?void 0:a.subtitles.position,onChange:n=>i("position",n.target.value),children:[e("option",{value:"bottom",children:"Bottom"}),e("option",{value:"top",children:"Top"})]})]}),e("div",{className:"form-group",children:[e("label",{children:"Highlight Color"}),e("input",{type:"color",value:a==null?void 0:a.subtitles.karaokeHighlightColor,onChange:n=>i("karaokeHighlightColor",n.target.value)})]})]}),e("section",{className:"section",children:[e("h2",{children:"Appearance"}),e("div",{className:"form-group",children:[e("label",{children:"Theme"}),e("select",{value:a==null?void 0:a.theme,onChange:n=>l({...a,theme:n.target.value}),children:[e("option",{value:"system",children:"System"}),e("option",{value:"light",children:"Light"}),e("option",{value:"dark",children:"Dark"})]})]})]})]}),e("footer",{className:"footer",children:[h&&e("div",{className:"message",children:h}),e("button",{className:"save-btn",onClick:v,disabled:r,children:r?"Saving...":"Save Settings"})]})]})}b(e(y,{}),document.getElementById("app"));
